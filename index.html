<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>MKW Mogi Manager</title>
	<link rel="stylesheet" href="./style.css" />
</head>
<body>
	<header class="row" style="justify-content: space-between">
		<h1 style="font-size: 18px; font-weight: 600; margin:0">MKW Mogi Manager</h1>
		<a href="https://github.com/PFQNiet/mkw-lounge-tracker" target="_blank" rel="noopener noreferrer" aria-label="View source on GitHub" class="icon-btn" title="View on GitHub">
			<img src="./img/github-logo.svg" width="20" height="20" aria-hidden="true" />
		</a>
	</header>

	<div id="step1">
		<section id="welcome" class="panel welcome" style="max-width:1100px; margin:16px auto;">
			<div>
				<p class="lead">Capture, OCR, score; right in your browser. No installs, no uploads.</p>

				<div class="chips" style="margin:6px 0 12px 0;">
					<span class="chip">Offline OCR</span>
					<span class="chip">Disconnect handler</span>
					<span class="chip">Manual resolve + edit</span>
					<span class="chip">Lounge export</span>
				</div>

				<ul class="steps">
					<li><strong>1.</strong> Click <em>Get started</em> and paste the 12-player roster (<code>1. Name (12345 MMR)</code>).</li>
					<li><strong>2.</strong> Pick your virtual webcam in the preview area.</li>
					<li><strong>3.</strong> After each race, hit <em>Capture &amp; OCR</em>. We'll auto-match; if unsure, we'll ask.</li>
					<li><strong>4.</strong> Fix anything via <em>Edit</em> &rarr; <em>Save</em>. Export scores when done.</li>
				</ul>

				<div class="cta" style="margin-top:12px;">
					<button id="start" class="btn--primary" style="padding:10px 14px; font-weight:600;">Get started</button>
				</div>
			</div>

			<div class="aside">
				<h3 style="margin:0 0 8px 0; font-size:14px;">Notes</h3>
				<ul style="margin:0; padding-left:18px; color:#9aa0a6;">
					<li>Race 1 must include all 12 players.</li>
					<li>10-player races are valid; 9 or fewer are a redo.</li>
					<li>DCs score 1 point (CPU names can appear, just confirm who DC'd).</li>
					<li>Everything stays local in your browser.</li>
				</ul>
			</div>
		</section>
	</div>

	<div id="step2" style="display:none;">
		<main class="row">
			<section class="panel main-view">
				<video id="preview" autoplay playsinline muted></video>
				<div class="row">
					<label class="muted">Camera</label>
					<select id="camera"><option value="">Loading...</option></select>
					<ins class="spacer"></ins>
					<button id="capture" class="btn--primary" accesskey="c">üì∏ Capture & OCR</button>
				</div>
				<div class="panel panel--warning">‚ö†Ô∏è Remember to always screenshot on Switch as well!</div>
				<div class="row">
					<ins class="spacer"></ins>
					<label class="button">
						<input type="checkbox" id="autoCapture" /> Auto-capture [BETA]
					</label>
				</div>
			</section>
			<section class="panel capture-view">
				<h2>Last capture</h2>
				<ol id="output" class="results"></ol>
			</section>
		</main>

		<!-- Scoreboard -->
		<section class="panel" style="max-width:1100px; margin:16px auto;">
			<h2>Scoreboard</h2>
			<div style="overflow:auto;">
				<table id="scoreTable" class="score mono" style="width:100%; border-collapse:collapse;"></table>
			</div>
			<div class="row">
				<a href="./" class="button btn--danger">New session</a>
				<ins class="spacer"></ins>
				<button id="exportScores" class="btn--primary" disabled>Export scores</button>
			</div>
		</section>

		<!-- Race history (snapshots) -->
		<section class="panel" style="max-width:1100px; margin:16px auto;">
			<h2>Race history</h2>
			<div id="raceGallery" class="gallery" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap:10px;"></div>
		</section>
	</div>

	<script type="module" src="./main.js"></script>
</body>
</html>
